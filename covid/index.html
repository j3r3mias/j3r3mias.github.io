<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Covid in Brazil - Vaccination Progress (updated every 6 hours)</title>
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-117519250-1"></script>
        <script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-117519250-1');
        </script>
        <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    </head>

    <body>
        <div id="chart_10"></div>
        <div id="chart_11"></div>
        <div id="chart_20"></div>
        <div id="chart_21"></div>

        <div>Population is based in Estimates of Resident Population in Brazil
            with reference date of July 1 (2020), minus the number of
            deaths by covid.</div>
        <script>


var options_10 = {

    chart: {
        height: 400,
        width: "95%",
        type: "line",
        zoom: {
            type: 'x',
            enabled: true,
            autoScaleYaxis: true
        },
        toolbar: {
            autoSelected: 'zoom'
        },
    },
    title: {
        text: 'Covid in Brazil - Percentage of Not Fully Vaccinated People',
        align: 'left',
        margin: 10,
        floating: false
    },
    series: [],
    colors: [
        '#e6194b', '#3cb44b', '#ffe119', '#4363d8', '#f58231',
        '#911eb4', '#46f0f0', '#f032e6', '#bcf60c', '#fabebe',
        '#008080', '#e6beff', '#9a6324', '#800000', '#aaffc3',
        '#808000', '#ffd8b1', '#000075', '#808080', '#3d9976',
        '#5be5b1', '#3d7699', '#5bb1E5', '#483d99', '#6d5bE5',
        '#8d3d99', '#d45be5'],
    xaxis: {
        title: {
            text: 'Date (YYYY-MM-DD)'
        }
    },
    yaxis: {
        title: {
            text: 'Percentage (%)'
        },
        max: 100,
    },

};

var options_11 = {
    series: [],
    chart: {
        type: 'bar',
        height: 500,
        width: "95%",
 
    },
    plotOptions: {
        bar: {
            barHeight: '100%',
            distributed: true,
            horizontal: true,
            dataLabels: {
                position: 'bottom'
            },
        }
    },
    colors: [
        '#e6194b', '#3cb44b', '#ffe119', '#4363d8', '#f58231',
        '#911eb4', '#46f0f0', '#f032e6', '#bcf60c', '#fabebe',
        '#008080', '#e6beff', '#9a6324', '#800000', '#aaffc3',
        '#808000', '#ffd8b1', '#000075', '#808080', '#3d9976',
        '#5be5b1', '#3d7699', '#5bb1E5', '#483d99', '#6d5bE5',
        '#8d3d99', '#d45be5'],
    xaxis: {
        title: {
            text: 'Percentage (%)'
        }
    },
    dataLabels: {
        enabled: true,
        textAnchor: 'start',
        style: {
            colors: ['#fff']
        },
        formatter: function (val, opt) {
            return opt.w.globals.labels[opt.dataPointIndex] + ":  " + val
        },
        offsetX: 0,
        dropShadow: {
            enabled: true
        }
    },
    stroke: {
        width: 1,
        colors: ['#fff']
    },
    yaxis: {
        labels: {
            show: false
        }
    },
    title: {
        text: 'Covid in Brazil - Percentage of Fully Vaccinated People',
        align: 'left',
        floating: true
    },

    tooltip: {
        theme: 'dark',
        x: {
            show: false
        },
        y: {
            title: {
                formatter: function () {
                    return ''
                }
            }
        }
    }
};

var options_20 = {

    chart: {
        height: 400,
        width: "95%",
        type: "line",
        zoom: {
            type: 'x',
            enabled: true,
            autoScaleYaxis: true
        },
        toolbar: {
            autoSelected: 'zoom'
        },
    },
    title: {
        text: 'Covid in Brazil - Percentage People with First or Single Dose of the Vaccine',
        align: 'left',
        margin: 10,
        floating: false
    },
    series: [],
    colors: [
        '#e6194b', '#3cb44b', '#ffe119', '#4363d8', '#f58231',
        '#911eb4', '#46f0f0', '#f032e6', '#bcf60c', '#fabebe',
        '#008080', '#e6beff', '#9a6324', '#800000', '#aaffc3',
        '#808000', '#ffd8b1', '#000075', '#808080', '#3d9976',
        '#5be5b1', '#3d7699', '#5bb1E5', '#483d99', '#6d5bE5',
        '#8d3d99', '#d45be5'],
    xaxis: {
        title: {
            text: 'Date (YYYY-MM-DD)'
        }
    },
    yaxis: {
        title: {
            text: 'Percentage (%)'
        },
        min: 0,
    },

};

var options_21 = {
    series: [],
    chart: {
        type: 'bar',
        height: 500,
        width: "95%",
    },
    plotOptions: {
        bar: {
            barHeight: '100%',
            distributed: true,
            horizontal: true,
            dataLabels: {
                position: 'bottom'
            },
        }
    },
    colors: [
        '#e6194b', '#3cb44b', '#ffe119', '#4363d8', '#f58231',
        '#911eb4', '#46f0f0', '#f032e6', '#bcf60c', '#fabebe',
        '#008080', '#e6beff', '#9a6324', '#800000', '#aaffc3',
        '#808000', '#ffd8b1', '#000075', '#808080', '#3d9976',
        '#5be5b1', '#3d7699', '#5bb1E5', '#483d99', '#6d5bE5',
        '#8d3d99', '#d45be5'],
    xaxis: {
        title: {
            text: 'Percentage (%)'
        }
    },

    dataLabels: {
        enabled: true,
        textAnchor: 'start',
        style: {
            colors: ['#fff']
        },
        formatter: function (val, opt) {
            return opt.w.globals.labels[opt.dataPointIndex] + ":  " + val
        },
        offsetX: 0,
        dropShadow: {
            enabled: true
        }
    },
    stroke: {
        width: 1,
        colors: ['#fff']
    },
    yaxis: {
        labels: {
            show: false
        }
    },
    title: {
        text: 'Covid in Brazil - Percentage People with First or Single Dose of the Vaccine',
        align: 'left',
        floating: true
    },
    tooltip: {
        theme: 'dark',
        x: {
            show: false
        },
        y: {
            title: {
                formatter: function () {
                    return ''
                }
            }
        }
    }
};          

var chart_10 = new ApexCharts(document.querySelector("#chart_10"), options_10);
var chart_11 = new ApexCharts(document.querySelector("#chart_11"), options_11);
var chart_20 = new ApexCharts(document.querySelector("#chart_20"), options_20);
var chart_21 = new ApexCharts(document.querySelector("#chart_21"), options_21);

chart_10.render();
chart_11.render();
chart_20.render();
chart_21.render();

$.getJSON('https://raw.githubusercontent.com/j3r3mias/j3r3mias.github.io/master/covid/brazil-not-fully-vaccinated-per-state.json', function(response) {
    chart_10.updateSeries(response.data)
});

$.getJSON('https://raw.githubusercontent.com/j3r3mias/j3r3mias.github.io/master/covid/brazil-not-fully-vaccinated-per-state.json', function(response) {
    states = [];
    values = [];
    title = 'Covid in Brazil - Percentage of Fully Vaccinated People in ' + response.data[0].data[response.data[0].data.length - 1].x;
    console.log(title);
    for (var i = 0; i < response.data.length; i++) {
        states.push(response.data[i].name);
        values.push((100 - response.data[i].data[response.data[i].data.length - 1].y).toFixed(3));
    }    
    chart_11.updateOptions({
        title: {
            text: title
        },
        series: [{
            data: values
        }],
        xaxis: {
            categories: states,
        }
    });
});

$.getJSON('https://raw.githubusercontent.com/j3r3mias/j3r3mias.github.io/master/covid/brazil-single-or-first-dose-vaccinated-per-state.json', function(response) {
    chart_20.updateSeries(response.data)
});

$.getJSON('https://raw.githubusercontent.com/j3r3mias/j3r3mias.github.io/master/covid/brazil-single-or-first-dose-vaccinated-per-state.json', function(response) {
    states = [];
    values = [];
    title = 'Covid in Brazil - Percentage of People with First or Single Shot in ' + response.data[0].data[response.data[0].data.length - 1].x;
    console.log(title);
    for (var i = 0; i < response.data.length; i++) {
        states.push(response.data[i].name);
        values.push(response.data[i].data[response.data[i].data.length - 1].y);
    }    
    chart_21.updateOptions({
        title: {
            text: title
        },
        series: [{
            data: values
        }],
        xaxis: {
            categories: states,
        }
    });                
});          
        </script>
    </body>
</html>
